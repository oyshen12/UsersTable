(function(){"use strict";var e={4721:function(e,t,s){var r=s(144),o=s(998),n=s(8032),a=s(3059),i=function(){var e=this,t=e._self._c;return t(o.Z,[t(n.Z,{attrs:{app:"",color:"primary",dark:""}},[e._v(" UsersTable ")]),t(a.Z,[t("users-table")],1)],1)},l=[],c=s(6190),u=s(9582),d=s(4324),p=s(5808),h=s(8718),m=function(){var e=this,t=e._self._c;return t("div",{staticClass:"d-flex justify-center"},[t("div",{staticClass:"d-flex flex-column ml-16"},[t(c.Z,{staticClass:"align-self-end my-8",attrs:{color:"primary",width:"300"},on:{click:function(t){e.addUserModal=!0}}},[e._v("Добавить")]),t("div",{staticClass:"d-flex pt-2"},[t(u.Z,{attrs:{width:"300"}},[t("div",{staticClass:"table-name",on:{click:e.sortByName}},[t("div",[e._v("Имя")]),t(h.Z),"nameDown"===e.sortedBy||"nameUp"===e.sortedBy?t(d.Z,{staticClass:"mr-2",style:{transform:"nameUp"===e.sortedBy?"rotate(0deg)":"rotate(180deg)"},attrs:{color:"black"}},[e._v("mdi-arrow-up")]):e._e()],1),t(p.Z,{staticClass:"pa-0"},e._l(e.sortedUsers(),(function(e){return t("table-item",{key:e.id,attrs:{user:e,nesting:0}})})),1)],1),t(u.Z,{attrs:{width:"300"}},[t("div",{staticClass:"table-name",on:{click:e.sortByPhone}},[t("div",[e._v("Телефон")]),t(h.Z),"phoneDown"===e.sortedBy||"phoneUp"===e.sortedBy?t(d.Z,{staticClass:"mr-2",style:{transform:"phoneUp"===e.sortedBy?"rotate(0deg)":"rotate(180deg)"},attrs:{color:"black"}},[e._v("mdi-arrow-up")]):e._e()],1),t(p.Z,{staticClass:"pa-0"},e._l(e.sortedUsers(),(function(e){return t("table-item-phone",{key:e.id,attrs:{user:e,nesting:0}})})),1)],1)],1)],1),e.addUserModal?t("add-user",{staticClass:"ml-16",on:{close:function(t){e.addUserModal=!1}}}):t("div",{staticClass:"ml-16 empty__block"})],1)},f=[],v=s(7397),y=s(4525),g=s(6037),b=function(){var e=this,t=e._self._c;return e.user.employees.length?t(v.Z,{class:{active:e.user.activator},style:{marginLeft:(0===e.nesting?0:10)+"px",color:e.user.activator?"inherit":"rgba(0, 0, 0, 0.87) !important"},attrs:{disabled:"",value:!0,"prepend-icon":"mdi-account-circle"},on:{"!click":function(t){return t.stopPropagation(),e.activator.apply(null,arguments)}},scopedSlots:e._u([{key:"activator",fn:function(){return[t(d.Z,{staticClass:"mr-1"},[e._v("mdi-account-circle")]),t(g.V9,[e._v(e._s(e.user.name)+" (id:"+e._s(e.user.id)+")")]),t(d.Z,{style:{transform:e.user.activator?"rotate(180deg)":"rotate(0deg)"}},[e._v("mdi-chevron-down")])]},proxy:!0}])},[e.user.activator?e._l(e.sortedUsers(e.user.employees),(function(s){return t("table-item",{key:s.id,attrs:{user:s,nesting:e.nesting+1}})})):e._e()],2):t(y.Z,{style:{marginLeft:(0===e.nesting?0:10)+"px"}},[t(g.V9,[e._v(e._s(e.user.name)+" (id:"+e._s(e.user.id)+")")])],1)},_=[],Z=s(629),w={computed:{...(0,Z.rn)(["sortedBy","users"])},methods:{...(0,Z.OI)(["setSortedBy","setUsers"]),getRootUsers(){return this.users.filter((e=>e.root))},sortedUsers(e){const t=e=>{const t=e=>Number.parseFloat(e.phone);return"up"===e?(e,s)=>t(e)<t(s)?1:-1:(e,s)=>t(e)>t(s)?1:-1},s=e=>{const t=e=>e.name.toLocaleLowerCase();return"up"===e?(e,s)=>t(e)<t(s)?1:-1:(e,s)=>t(e)>t(s)?1:-1};let r=[];return r=e?.length?this.users.filter((t=>e.includes(t.id))):this.getRootUsers(),"default"===this.sortedBy?r:"phoneUp"===this.sortedBy?r.sort(t("up")):"phoneDown"===this.sortedBy?r.sort(t("down")):"nameUp"===this.sortedBy?r.sort(s("up")):"nameDown"===this.sortedBy?r.sort(s("down")):[]},downloadState(){const e=JSON.parse(localStorage.getItem("users"));e?this.setUsers(e):localStorage.setItem("users",JSON.stringify(this.users))}}},B={name:"TableItem",props:["user","nesting"],mixins:[w],data(){return{}},methods:{...(0,Z.OI)(["activatorChange"]),activator(){this.activatorChange({id:this.user.id,activator:!this.user.activator})}}},U=B,x=s(1001),C=(0,x.Z)(U,b,_,!1,null,null,null),S=C.exports,k=function(){var e=this,t=e._self._c;return e.user.employees.length?t(p.Z,[t(g.V9,{staticStyle:{height:"48px"}},[e._v(e._s(e.user.phone))]),e.user.activator?e._l(e.sortedUsers(e.user.employees),(function(e){return t("table-item-phone",{attrs:{user:e,id:e.id}})})):e._e()],2):t(y.Z,[t(g.V9,{staticStyle:{height:"48px"}},[e._v(e._s(e.user.phone))])],1)},O=[],I={name:"TableItemPhone",props:["user"],mixins:[w],data(){return{}},methods:{...(0,Z.OI)(["activatorChange"]),activator(){this.activatorChange({id:this.user.id,activator:!this.user.activator})}}},P=I,j=(0,x.Z)(P,k,O,!1,null,"933bd0c6",null),T=j.exports,M=s(4886),N=s(381),D=s(7823),E=s(7808),$=function(){var e=this,t=e._self._c;return t(u.Z,{staticClass:"pa-4 add__user-card",attrs:{height:"400",width:"307"}},[t(D.Z,{attrs:{color:"white"}},[t(h.Z),t(c.Z,{attrs:{right:"",icon:""},on:{click:e.closeModal}},[t(d.Z,[e._v("mdi-close")])],1)],1),t(M.EB,{staticClass:"pl-0"},[e._v("Добавление пользователя")]),t(E.Z,{staticClass:"mt-2",attrs:{label:"Имя",rules:[e.rules.required],autocomplete:"off"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),t(E.Z,{staticClass:"mt-4 inputPhone",attrs:{type:"number",rules:[e.rules.required,e.rules.phone],label:"Телефон",autocomplete:"off"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),t(N.Z,{staticClass:"mt-4",attrs:{label:"Начальник",items:e.users,"item-text":e.selectItem,"return-object":"",clearable:""},model:{value:e.chief,callback:function(t){e.chief=t},expression:"chief"}}),t(c.Z,{staticClass:"mt-4",attrs:{width:"100%",color:"primary"},on:{click:e.save}},[e._v("Сохранить")])],1)},L=[],V={data(){return{name:"",phone:"",chief:{},rules:{required:e=>!!e||"Обязательное поле",phone:e=>{const t=/^((8|\+7)[\- ]?)?(\(?\d{3}\)?[\- ]?)?[\d\- ]{7,10}$/,s=t.test(e);return s||"Некорректный номер телефона"}}}},computed:{...(0,Z.rn)(["users"]),...(0,Z.Se)(["getNewId"])},methods:{...(0,Z.OI)(["addUser","addEmployee"]),selectItem(e){return`${e.name} (id: ${e.id})`},closeModal(){this.$emit("close")},save(){const e=/^((8|\+7)[\- ]?)?(\(?\d{3}\)?[\- ]?)?[\d\- ]{7,10}$/;if(""!==this.name&&""!==this.phone&&e.test(this.phone)){const e=this.getNewId,t=this.chief&&0!==Object.keys(this.chief).length,s={id:e,name:this.name,phone:this.phone,activator:!1,employees:[],root:!t};this.addUser(s),t&&this.addEmployee({id:this.chief.id,idEmployee:e}),localStorage.setItem("users",JSON.stringify(this.users)),this.closeModal()}}}},q=V,J=(0,x.Z)(q,$,L,!1,null,"182742d2",null),A=J.exports,F={components:{TableItem:S,TableItemPhone:T,AddUser:A},mixins:[w],data(){return{search:"",addUserModal:!1}},computed:{},methods:{sortByPhone(){"phoneDown"===this.sortedBy?this.setSortedBy("phoneUp"):"phoneUp"===this.sortedBy?this.setSortedBy("default"):this.setSortedBy("phoneDown")},sortByName(){"nameDown"===this.sortedBy?this.setSortedBy("nameUp"):"nameUp"===this.sortedBy?this.setSortedBy("default"):this.setSortedBy("nameDown")}},mounted(){this.downloadState()}},R=F,z=(0,x.Z)(R,m,f,!1,null,"f3e2147c",null),G=z.exports,H={name:"App",components:{UsersTable:G}},K=H,Q=(0,x.Z)(K,i,l,!1,null,null,null),W=Q.exports;s(7658);r.ZP.use(Z.ZP);var X=new Z.ZP.Store({state:{users:[{id:0,name:"Иван",phone:"+7918000000",root:!0,activator:!0,employees:[]},{id:1,name:"Петр",phone:"+7918111111",root:!0,activator:!0,employees:[2,3,4]},{id:2,name:"Алексей",phone:"+7918222222",activator:!1,employees:[]},{id:3,name:"Александр",phone:"+7918333333",activator:!1,employees:[]},{id:4,name:"Сергей",phone:"+7918444444",activator:!0,employees:[5]},{id:5,name:"Дмитрий",phone:"+7918555555",activator:!0,employees:[6]},{id:6,name:"Владимир",phone:"+7918666666",activator:!0,employees:[7]},{id:7,name:"Владислав",phone:"+7918777777",activator:!1,employees:[]},{id:8,name:"Никита",phone:"+7918888888",activator:!1,root:!0,employees:[]},{id:9,name:"Арсен",phone:"+7918999999",activator:!1,root:!0,employees:[]},{id:10,name:"Ярослав",phone:"+7918101010",activator:!1,root:!0,employees:[]}],sortedBy:"default"},getters:{getNewId(e){return e.users.length+1}},mutations:{setUsers(e,t){e.users=t},activatorChange(e,t){const s=e.users.findIndex((e=>e.id===t.id));e.users[s].activator=t.activator},addUser(e,t){e.users.push(t)},addEmployee(e,t){const s=e.users.findIndex((e=>e.id===t.id));e.users[s].employees.push(t.idEmployee)},setSortedBy(e,t){e.sortedBy=t}},actions:{},modules:{}}),Y=s(1705);r.ZP.use(Y.Z);var ee=new Y.Z({});r.ZP.config.productionTip=!1,new r.ZP({store:X,vuetify:ee,render:e=>e(W)}).$mount("#app")}},t={};function s(r){var o=t[r];if(void 0!==o)return o.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,s),n.exports}s.m=e,function(){var e=[];s.O=function(t,r,o,n){if(!r){var a=1/0;for(u=0;u<e.length;u++){r=e[u][0],o=e[u][1],n=e[u][2];for(var i=!0,l=0;l<r.length;l++)(!1&n||a>=n)&&Object.keys(s.O).every((function(e){return s.O[e](r[l])}))?r.splice(l--,1):(i=!1,n<a&&(a=n));if(i){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[r,o,n]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};s.O.j=function(t){return 0===e[t]};var t=function(t,r){var o,n,a=r[0],i=r[1],l=r[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(o in i)s.o(i,o)&&(s.m[o]=i[o]);if(l)var u=l(s)}for(t&&t(r);c<a.length;c++)n=a[c],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(u)},r=self["webpackChunkuserstable"]=self["webpackChunkuserstable"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=s.O(void 0,[998],(function(){return s(4721)}));r=s.O(r)})();
//# sourceMappingURL=app.06423609.js.map